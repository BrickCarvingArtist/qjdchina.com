webpackJsonp([7],{0:function(e,t,n){"use strict";var a=n(301),r=n(154);(0,a.init)(r.render)},178:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(2),c=a(u),s=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state=e,n.handleChange=function(e){var t=n.state,a=t.index,r=t.userClass,o=(r.state.selectIndex||[]).filter(function(e,t){return a>t});o[a]=e.target.value,r.setState({selectIndex:o},function(){var e=r.getCompleteStatus();e?r.state.callback(e,r.getSelectIndex()):r.state.callback(e)})},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.state;e.userClass.state["default"]&&this.handleChange({target:{value:Object.keys(e.option)[0]}})}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=[],t=this.state,n=t.option,a=t.userClass;for(var r in n)e.push(c["default"].createElement("option",{value:r,key:r},n[r]));return a.state["default"]||e.splice(0,0,c["default"].createElement("option",{value:0,key:0},"请选择")),c["default"].createElement("select",{onChange:this.handleChange},e)}}]),t}(u.Component),f=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state=e,n.getPureSelect=function(e,t){return e[t]},n.getCompleteStatus=function(){var e=n.state.selectIndex;switch(n.state.checkType){case"single":return e.length&&e[0];case"region":return e[1]&&6===e[1].length||e[2]&&6===e[2].length;case"manufacturer":return 2===e.length&&e[1]}},n.getSelectIndex=function(){var e=n.state.selectIndex;return"region"===n.state.checkType&&(e[2]=e[2]||e[1],e[1]=(e[2]||e[1]).slice(0,4),e[0]=e[1].slice(0,2)),e},n}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=[],n=this.state,a=n.option,r=n.selectIndex;return a.map(function(n,a){n.filter(function(e,t){return e instanceof Object}).length?r&&r.map(function(r,o){var i=e.getPureSelect(n,r);i&&t.splice(a,1,c["default"].createElement(s,{option:i,key:a,userClass:e,index:a}))}):t.push(c["default"].createElement(s,{option:n,key:a,userClass:e,index:a}))}),c["default"].createElement("div",{className:"selectGroup"+(n["default"]?" disabled":"")},t)}}]),t}(u.Component);t["default"]=f},301:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e){return Array.isArray(e)?e:Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.Page=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(2),s=a(c),f=n(155),d=n(165),p=n(168),m=n(170),h=a(m),y=n(178),v=a(y),b=n(172),g=a(b),C=n(176),E=a(C),k=n(175),S=a(k),x=(0,f.createStore)(function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];if(e[t.type])for(var n in t)e[t.type][n]=t[n];else e[t.type]=t;return e}),O=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));n.state={};var a=x.getState().dialog.component,l=function(e){return n.refs[e].refs.ipt.value},u=function(e,t){return e[t]},c=function(e){var t=r(e),n=t,a={categoryCode:n[0],supplierId:n[1]};return a};n.handleStreet=function(){return 0},n.getArea=function(e,t,a){var r=n.state.areaConfig,o=r[0],i=r[1],l=r[2],u=[],c=[],s=[];return u[e]=o[e],c[t]=i[e][t],s[a]=(l[t]||i[e])[a],c[t]?[u,c,s]:[u,s]};var s=void 0,f=void 0,d=void 0,m=void 0,h=void 0,y=void 0,v=void 0,b=void 0,g=void 0;return n.handleSubmit=function(){var e=n.state.arrAddress,t=n.refs.manufacturer.state.selectIndex;b=l("corp"),d=l("ic"),f=l("contact"),s=l("mobile"),v=u(e,0),y=u(e,1),h=u(e,2),m=n.refs.street.value,g=c(t),$.ajax({type:"post",url:"/api/user/join",data:{mobile:s,contactName:f,cats:JSON.stringify([g]),regCode:d,address:m,areaCode:h,cityCode:y,provinceCode:v,corpName:b}}).done(function(e){(0,p.afterSign)(e,function(e){location.href="/manage/corporation?step=1"},a)}).fail(function(e){(0,p.xhrTimeout)("申请会员",a)})},n}return l(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,t=x.getState().dialog.component,a=[],r=[],o=(0,d.parse)(location.search.substr(1));5===Object.keys(o).length&&this.setState({info:o,corp:o.companyName,street:o.address}),n.e(4,function(t){var a=n(298),r=[];for(var o in a)r.push(a[o]);e.setState({areaConfig:r})}),$.ajax({url:"/api/user/supplier/category",timeout:2e3}).done(function(n){(0,p.afterSign)(n,function(n){n.data.map(function(e,t){a[e.value]=e.label,r[e.value]=[]}),$.ajax({url:"/api/user/supplier/list",timeout:2e3}).done(function(n){(0,p.afterSign)(n,function(t){t.data.map(function(e,t){r[e.categoryCode][e.id]=e.name}),e.setState({manufacturers:[a,r]})},t)}).fail(function(e){(0,p.xhrTimeout)("合作厂家列表",t)})},t)}).fail(function(e){(0,p.xhrTimeout)("合作厂家所属品类",t)})}},{key:"render",value:function(){var e=this,t=[],n=this.state,a=this.props.option,r=n.areaConfig||[],o=n.manufacturers,i=n.info;return a.map(function(a,l){a.type?t.push(s["default"].createElement(h["default"],{option:a,key:l,ref:a.id,value:n[a.id]})):("address"===a.id&&t.push(s["default"].createElement("div",{className:"row",key:l},s["default"].createElement("label",{htmlFor:a.id},a.label),s["default"].createElement(v["default"],{id:a.id,"default":i,option:i&&r.length?e.getArea(i.provinceCode,i.cityCode,i.areaCode):r,checkType:"region",ref:a.id,callback:function(t,n){e.setState({showAddress:t,arrAddress:n})}}),n.showAddress?s["default"].createElement("input",{className:"ipt-txt single"+(n.street?" disabled":""),placeholder:"请输入"+a.label,ref:"street",value:n.street,onChange:e.handleStreet}):[])),"manufacturer"===a.id&&o&&t.push(s["default"].createElement("div",{className:"row",key:l},s["default"].createElement("label",{htmlFor:a.id},a.label),s["default"].createElement(v["default"],{id:a.id,option:o,ref:a.id,checkType:"manufacturer",callback:function(t,n){e.setState({completeStatus:t,selectIndex:n})}}))))}),s["default"].createElement("form",null,s["default"].createElement("div",{className:"w1000"},s["default"].createElement("h1",null,"立刻申请仟金顶会员，尊享仟金顶优质服务"),t,s["default"].createElement("input",{className:"singleBtn",type:"button",value:"提交申请,去上传资料",onClick:this.handleSubmit})))}}]),t}(c.Component);O.defaultProps={option:[{type:1,id:"corp",className:"ipt-txt",label:"公司名称"},{type:0,id:"address",label:"联系地址"},{type:1,id:"ic",className:"ipt-txt",label:"工商注册号",maxlength:15},{type:0,id:"manufacturer",label:"合作厂家"},{type:1,id:"contact",className:"ipt-txt",label:"联系人"},{type:1,id:"mobile",className:"ipt-txt",label:"手机号",maxlength:11}]};var j=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){return s["default"].createElement("div",{className:"page"},s["default"].createElement(S["default"],{store:x}),s["default"].createElement(g["default"],{store:x}),s["default"].createElement(O,null),s["default"].createElement(E["default"],null))}}]),t}(c.Component),w=function(e){e(s["default"].createElement(j,null),document.querySelector(".main"))};t.Page=j,t.init=w}});